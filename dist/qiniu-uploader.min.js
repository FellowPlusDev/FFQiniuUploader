/*! ff-qiniu-uploader 2015-09-26 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];d(this,f),this.uploader=a,this.name=b.name,this.bucket=b.bucket,this.domain=b.domain,this.ssl=b.ssl||!1,this.accept=b.accept,this.uptokenUrl=b.uptokenUrl,this["public"]=!0,void 0!==b["public"]&&(this["public"]=b["public"])};c["default"]=e,b.exports=c["default"]},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./profile"),h=d(g),i=Symbol(),j=Symbol(),k=function(){function a(b){var c=this,d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(e(this,a),b!=j)throw"Cannot construct singleton";this.uptokenUrl=d.uptokenUrl,this.profiles=[],this.files=[],Array.isArray(d.profiles)&&d.profiles.forEach(function(a){c.register(a)})}return f(a,[{key:"register",value:function(a){this.profiles[a.name]=new h["default"](this,a)}},{key:"_makeInput",value:function(a,b){var c=this,d=document.createElement("input");return d.setAttribute("type","file"),d.setAttribute("accept",b.accept),Object.assign(d.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),document.body.appendChild(d),d.addEventListener("change",function(e){d.value.length>0&&c.addFiles(e.target.files,a,b),d.parentNode.removeChild(d)},!1),d}},{key:"addFiles",value:function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];this.files.push(e);var f=new CustomEvent("qinu:file:added",{bubbles:!0,detail:{uploader:this,profile:c}});b.dispatchEvent(f)}}},{key:"browse",value:function(a,b){var c=this.profiles[b];if(!c)throw"Profile '"+b+"' not registered";var d=this._makeInput(a,c);d.click()}}],[{key:"init",value:function(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this[i])throw"Uploader has initialized.";this[i]=new a(j,b)}},{key:"instance",get:function(){if(this[i])return this[i];throw"Uploader not configured."}}]),a}();window.QiniuUploader=k},{"./profile":1}]},{},[2]);
//# sourceMappingURL=qiniu-uploader.min.js.map